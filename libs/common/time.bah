#include "string.bah"
#include "memory.bah"
#include "<time.h>"

//This is a wrapper that makes time manipulations easier.
//By default, its .timestamp field is set to the current time.
struct time {
    timestamp: int = time(0)

    //To set the timestamp to the current time.
    now() {
        this.timestamp = time(0)
    }
    
    //To format the timestamp using the specified format.
    //The format options can be found [here](https://koor.fr/C/ctime/strftime.wp).
    format(a cpstring) cpstring {
        
        lt int = localtime(&this.timestamp)

        date cpstring = memoryAlloc(1024)
        strftime(date, 1024, a, lt)
        return date
    } 

    //To get the number of seconds since the timestamp.
    since() int {
        nt = time(0)
        r = nt - this.timestamp
        return r
    }
}

//Example
// #include "iostream.bah"
// #include "time.bah"
// main() {
// ts = time{}
// ts.now()
// formattedTime = ts.format("hou:min:sec")
// println(formattedTime)
// }